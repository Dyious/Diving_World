(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63eee386"],{2916:function(t,e,a){"use strict";var r=a("6dfe"),s=a.n(r);s.a},"56a3":function(t,e,a){},"6dfe":function(t,e,a){},8418:function(t,e,a){"use strict";var r=a("c04e"),s=a("9bf2"),c=a("5c6c");t.exports=function(t,e,a){var o=r(e);o in t?s.f(t,o,c(0,a)):t[o]=a}},9308:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container paginate"},[a("ul",{staticClass:" paginate"},[a("li",{staticClass:"rounded",on:{click:function(e){return t.changePage(t.pageData.current_page-1)}}},[t._v("<")]),t._l(t.pageData.total_pages,(function(e,r){return a("li",{key:r,class:{active:e===t.pageData.current_page},on:{click:function(a){return t.changePage(e)}}},[t._v(" "+t._s(e)+" ")])})),a("li",{staticClass:"rounded",on:{click:function(e){return t.changePage(t.pageData.current_page+1)}}},[t._v(">")])],2)])},s=[],c={props:{pageData:{type:Object,default:function(){return{}}}},methods:{changePage:function(t){0!==t&&t!==this.pageData.total_pages+1&&this.$emit("changePage",t)}}},o=c,i=(a("fb84"),a("2877")),n=Object(i["a"])(o,r,s,!1,null,null,null);e["a"]=n.exports},"99af":function(t,e,a){"use strict";var r=a("23e7"),s=a("d039"),c=a("e8b5"),o=a("861d"),i=a("7b0b"),n=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),h=a("2d00"),g=p("isConcatSpreadable"),f=9007199254740991,v="Maximum allowed index exceeded",m=h>=51||!s((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),P=d("concat"),_=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:c(t)},w=!m||!P;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,r,s,c,o=i(this),d=u(o,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(c=-1===e?o:arguments[e],_(c)){if(s=n(c.length),p+s>f)throw TypeError(v);for(a=0;a<s;a++,p++)a in c&&l(d,p,c[a])}else{if(p>=f)throw TypeError(v);l(d,p++,c)}return d.length=p,d}})},ed84:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-5"},[a("div",{staticClass:"show-part-content"},[a("div",{staticClass:"nav-show-part"},[a("div",{staticClass:"container justify-content-start d-flex align-items-center h-100"},[a("ul",{staticClass:"col-lg-10 m-0 "},t._l(t.productsNameChart,(function(e,r,s){return a("li",{key:s,staticClass:"product-link",on:{click:function(e){t.showItem=r}}},[a("span",{staticClass:"link-name",class:t.showItem===r?"product-hight-line":""},[t._v(" "+t._s(e)+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:s!==Object.keys(t.productsNameChart).length-1,expression:"index !== (Object.keys(productsNameChart).length-1)"}],staticClass:"line-main-right border-light"})])})),0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderBy,expression:"orderBy"}],staticClass:"form-control text-minor-self col d-none d-lg-flex",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"high"}},[t._v("價格由高到低")]),a("option",{attrs:{value:"low"}},[t._v("價格由低到高")])])])]),a("div",{staticClass:"product-show-part container mt-5"},[a("div",{staticClass:"d-flex flex-wrap row-cols-md-2 row-cols-lg-3 mt-3"},t._l(t.products,(function(e,r){return a("div",{key:r,staticClass:"card-item mb-4"},[a("div",{staticClass:"card mx-2"},[a("img",{attrs:{src:e.imageUrl[0],alt:e.title}}),a("div",{staticClass:"card-info-tile text-left px-3"},[a("h5",[t._v(t._s(e.title))]),a("small",{class:e.price!==e.origin_price?"slot-free":""},[t._v(" $"+t._s(e.origin_price)+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.price!==e.origin_price,expression:"product.price !== product.origin_price"}]},[t._v("$"+t._s(e.price))])]),a("div",{staticClass:"fa-icon-group flex-total-center"},[a("i",{staticClass:"fas fa-search col flex-total-center",on:{click:function(a){return t.openProduct(e)}}}),a("i",{staticClass:"fas fa-cart-plus col flex-total-center",on:{click:function(a){return t.addOneProduct(e)}}})])])])})),0)])]),t.productsPaginate.total_pages>1?a("Paginate",{attrs:{pageData:t.productsPaginate},on:{changePage:t.calcProducts}}):t._e()],1)},s=[],c=(a("99af"),a("4de4"),a("d3b7"),a("9308")),o={data:function(){return{promtyMessage:"",orProducts:[],products:[],productsPaginate:{},showItem:"all",orderBy:"high",prePage:9,productsNameChart:{all:"全部商品",mirror:"面鏡",watch:"潛水錶",snorkel:"呼吸管",fins:"蛙鞋","class-free":"自由潛水課程","class-sucba":"水肺潛水課程"}}},components:{Paginate:c["a"]},methods:{getProducts:function(){var t=this,e=this.$loading.show(),a="".concat("https://course-ec-api.hexschool.io/api/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/products"),r={page:1,paged:"100",orderBy:"price",sort:"desc"};this.$http.get(a,{params:r}).then((function(a){t.orProducts=a.data.data,t.productsPaginate={current_page:1,total:a.data.meta.pagination.total,total_pages:Math.ceil(a.data.meta.pagination.total/t.prePage)},t.calcProducts(),e.hide(),t.showItem=void 0===t.$route.query.type?"all":t.$router.query.type})).catch((function(t){console.log(t)}))},calcProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.orProducts;this.productsPaginate.current_page=t,this.sortByPrice(e),this.products=[];for(var a=t-1,r=a*this.prePage+this.prePage,s=r<e.length?r:e.length,c=a*this.prePage;c<s;c+=1)this.products.push(e[c])},sortByPrice:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.orProducts;e.sort((function(e,a){return"high"===t.orderBy?a.price-e.price:e.price-a.price}))},openProduct:function(t){this.$router.push({name:"Product",params:{id:t.id}})},addOneProduct:function(t){var e=this,a=this.$loading.show(),r="".concat("https://course-ec-api.hexschool.io/api/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/shopping"),s={product:t.id,quantity:1};this.$http.post(r,s).then((function(){e.$bus.$emit("resetCarts"),e.promtyMessage="加入購物車成功"})).catch((function(){e.promtyMessage="該產品已存在於購物車中"})).finally((function(){a.hide(),e.$bus.$emit("catchPrompt",{message:e.promtyMessage})}))}},created:function(){this.getProducts()},watch:{showItem:function(){var t=this,e="all"===this.showItem?this.orProducts:this.orProducts.filter((function(e){return e.category===t.showItem}));this.productsPaginate={current_page:1,total:e.length,total_pages:Math.ceil(e.length/this.prePage)},this.calcProducts(1,e)},orderBy:function(){this.calcProducts(1,"all"===this.showItem.page?this.orProducts:this.products)}}},i=o,n=(a("2916"),a("2877")),l=Object(n["a"])(i,r,s,!1,null,null,null);e["default"]=l.exports},fb84:function(t,e,a){"use strict";var r=a("56a3"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-63eee386.0ff03ef1.js.map